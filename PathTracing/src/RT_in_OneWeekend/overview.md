# 1. 概述
    

多年来我教授了很多图形学课程，常常使用光线追踪来教学，因为它迫使你编写所有的代码，但不依赖 API 也能生成很酷的图像。我决定将我的课程笔记整理成一个实践指南，帮助你尽快实现一个有趣的程序。它不会是一个功能全面的光线追踪器，但会包括间接光照——这是光线追踪在电影中大放异彩的关键所在。按部就班地跟着做，你最终构建的光线追踪架构将非常适合日后扩展成更完整的系统。

当人们说“光线追踪”时，可能指很多不同的技术。而我将要讲解的，其实是一个路径追踪器，而且是比较通用的那种。虽然代码会非常简单（让计算机多干活！），但我相信你会对它生成的图像感到满意。

我将按照我自己的习惯顺序带你一步步实现一个光线追踪器，并分享一些调试技巧。到最后，你将拥有一个能生成优质图像的光线追踪器。这个过程你在一个周末内就能完成。如果花得更久也没关系。我用的是 C++ 作为主要语言，但你不一定非得用它。不过我建议你还是用 C++，因为它快、跨平台，而且目前电影和游戏中的多数渲染器也是用它写的。需要说明的是，我尽量不使用太多“现代 C++”的特性，但继承和操作符重载在光线追踪中非常有用，我保留了它们。

我不会在网上直接发布完整代码，但这些代码都是真实的，除了 vec3 类中的一些简单操作符以外，我会展示全部代码。我坚信动手敲代码才能学会它；但如果代码现成可用我也会用，所以当我不分享代码时才是真正践行了这个理念。——不过我留下这段话，是因为我后来180度大转弯了。有不少读者在实现时遇到细节错误，彼此对比代码后得到了帮助。所以我建议你还是亲自敲一遍代码，但你也可以在 GitHub 上的 RayTracing 项目中找到每本书对应的最终源码。

关于这些书中代码的实现，有几点原则我们始终坚持：

* 所有代码都应体现书中讲解的核心概念。
    
* 虽然使用 C++，但尽可能简洁。我们的风格更偏向 C，但会适当使用现代特性以提升易用性或可读性。
    
* 编码风格尽量延续最初几本书的传统，以保持一致性。
    
* 行长度控制在每行不超过 96 个字符，以确保代码在代码库和书籍中展示一致。
    

因此，这些代码为你提供了一个基础实现，剩下的优化空间和现代化改进则留给读者自行探索。这些代码是可以不断优化的，而我们优先选择的是简单明了的方案。

我们假设你对向量有一些基础了解，比如点乘和向量加法。如果你还不了解，建议先复习一下。可参考 Morgan McGuire 的《Graphics Codex》在线文档，Steve Marschner 与 Peter Shirley 合著的《Fundamentals of Computer Graphics》，或者 J.D. Foley 和 Andy Van Dam 的《Computer Graphics: Principles and Practice》。

查看项目的 README 文件可以了解项目详情，包括 GitHub 仓库地址、目录结构、编译与运行说明、错误修正与贡献方法等内容。

如需进一步阅读相关资源，请查看我们的 wiki 页面“Further Reading”。

这些书已经排版优化过，可直接通过浏览器打印，同时每次发布中也包含对应的 PDF 文件，在“Assets”部分可以找到。

如果你想与我们联系，欢迎通过邮件交流：

* Peter Shirley: ptrshrl@gmail.com
    
* Steve Hollasch: steve@hollasch.net
    
* Trevor David Black: trevordblack@trevord.black
    

最后，如果你在实现过程中遇到问题，有一般性问题，或希望分享自己的创意与成果，请访问该项目的 GitHub Discussions 论坛。

感谢所有为这个项目做出贡献的人，他们的名字列在本书末尾的致谢部分。

那我们开始吧！