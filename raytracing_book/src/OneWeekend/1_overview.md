# 1. 概述
***
这些年来，我教授过许多图形课程。通常我会采用光线追踪来教学，因为它迫使你编写所有代码，但又不需要使用任何 API 就能生成酷炫的图像。我决定将课程笔记整理成一个操作指南，让你尽快写出一个有趣的程序。这个程序不会是一个功能齐全的光线追踪器，但它包含了间接光照，这正是光线追踪在电影制作中广泛使用的原因。按照这些步骤，你所构建的光线追踪器将拥有良好的架构，如果你有兴趣深入研究，也很容易扩展成一个更复杂的系统。

当有人提到“光线追踪”时，这个词可以有很多含义。我在这里要介绍的技术上叫做路径追踪器，是一种相对通用的方法。虽然代码本身会相当简单（让计算机来做繁重的工作！），但你生成的图像质量应该会令你满意。

我将按照我自己的实现顺序带你一步步写出一个光线追踪器，并提供一些调试建议。最终，你会拥有一个能生成高质量图像的追踪器。你应该可以在一个周末内完成这个项目，即使花更长时间也不用担心。我使用的是 C++，你不一定非得用它，但我建议你用，因为它速度快、可移植，而且大多数电影和游戏渲染器都是用 C++ 编写的。需要注意的是，我尽量避免使用 C++ 的“现代特性”，但继承和操作符重载对于光线追踪器来说非常实用，值得保留。

我不会在线提供完整的代码，但所展示的代码都是实际可运行的，除了 vec3 类中几个简单的运算符外，其余都会展示。我坚信要通过亲自输入代码来学习它，但如果有现成代码，我也会使用，因此我并不是只说不做。所以请别问我要代码！

我保留了上述这段话，因为它很有趣，体现了我态度的转变。有几个读者在实现时遇到一些微妙的错误，我们在比较代码时解决了这些问题。所以请你还是亲自输入代码，但你可以在 GitHub 上的 RayTracing 项目中找到每本书的完整源码。

关于这些书中实现代码的说明 —— 我们在包含的代码中秉持如下原则：

代码应实现书中所讲的概念。

我们使用 C++，但尽量保持简单。我们的编程风格更偏向 C 语言，但当现代特性能让代码更易用或更易理解时，我们也会使用它们。

我们尽量延续最初几本书所确立的编码风格，以保持一致性。

每行代码长度限制在 96 个字符，以便代码在代码库和书中都能保持一致。

因此，这些代码只是一个基础实现，留给读者大量可以优化和改进的空间。你可以无限地对这些代码进行优化和现代化，但我们更注重简单明了的解决方案。

我们假设你对向量（如点积和向量加法）有一定了解。如果你不了解这些概念，可以先进行一些复习。推荐的复习资料包括：Morgan McGuire 的 《Graphics Codex》（在线版）、Steve Marschner 和 Peter Shirley 的 《Fundamentals of Computer Graphics》，以及 J.D. Foley 和 Andy Van Dam 的 《Computer Graphics: Principles and Practice》。

关于这个项目的更多信息，包括 GitHub 仓库、目录结构、构建和运行方式、如何提交修正或贡献内容，请参见项目的 README 文件。

你还可以查看我们的 wiki 页面 “Further Reading”，获取更多相关资源。

这些书的格式设计适合直接从浏览器打印。每次发布时我们也会在“Assets”部分附带每本书的 PDF 文件。

如果你想联系我们，欢迎通过以下邮箱与我们交流：

Peter Shirley: ptrshrl@gmail.com

Steve Hollasch: steve@hollasch.net

Trevor David Black: trevordblack@trevord.black

最后，如果你在实现中遇到问题、有一般性问题，或想分享自己的想法或成果，请访问 GitHub 项目的 Discussions 论坛。

感谢所有为这个项目出力的人，他们的名字列在本书结尾的致谢部分。

让我们开始吧！